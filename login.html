<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login – Gestão Agro</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary:#1e40af; --bg:#0f172a; --card:#020617;
      --border:#1f2937; --text:#e5e7eb; --muted:#9ca3af;
      --danger:#ef4444;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:'Inter',system-ui,sans-serif}
    body{
      background:radial-gradient(circle at top,#1d4ed8 0,#020617 55%,#000 100%);
      color:var(--text);display:flex;align-items:center;justify-content:center;
      padding:1.5rem;
    }
    .login-card{
      width:100%;max-width:420px;background:rgba(15,23,42,.96);
      border-radius:1rem;padding:2rem;border:1px solid var(--border);
      box-shadow:0 20px 60px rgba(0,0,0,.6);
    }
    h1{font-size:1.5rem;font-weight:700;margin-bottom:1.25rem;text-align:center}
    p{font-size:.9rem;color:var(--muted);margin-bottom:1.5rem;text-align:center}
    label{display:block;font-size:.85rem;font-weight:600;margin-bottom:.35rem}
    input{
      width:100%;padding:.75rem .9rem;border-radius:.75rem;
      border:1px solid #334155;background:#020617;color:var(--text);
      font:inherit;margin-bottom1rem;
    }
    input:focus{
      outline:none;border-color:var(--primary);
      box-shadow:0 0 0 2px rgba(37,99,235,.4);
    }
    .btn{
      width:100%;padding:.85rem;border:none;border-radius:999px;
      background:linear-gradient(135deg,#22c55e,#16a34a);
      color:#ecfdf5;font-weight:700;font-size:.95rem;cursor:pointer;
      margin-top:.75rem;
    }
    .btn:hover{filter:brightness(1.05)}
    .error{
      display:none;margin-top:.75rem;font-size:.8rem;color:var(--danger);
      text-align:center;
    }
    .hint{margin-top:1rem;font-size:.8rem;color:var(--muted);line-height:1.5}
    .hint code{background:#020617;border-radius:.35rem;padding:.1rem .35rem}
  </style>
</head>
<body>
  <div class="login-card">
    <h1>Login – Gestão Agro</h1>
    <p>Entre com seu usuário e senha</p>

    <label for="usuario">Usuário</label>
    <input type="text" id="usuario" autocomplete="username" />

    <label for="senha">Senha</label>
    <input type="password" id="senha" autocomplete="current-password" />

    <button class="btn" id="btn-login">Entrar</button>
    <div class="error" id="error">Usuário ou senha incorretos.</div>

    <div class="hint">
      <strong>Configurar gerentes e fazendas:</strong><br>
      Edite a constante <code>USUARIOS</code> no final deste arquivo.
    </div>
  </div>

  <script>
    // =========================
    // CONFIGURAÇÃO DE USUÁRIOS
    // =========================
    //
    // Cada chave é o "login" do gerente.
    // - senha: senha de acesso
    // - fazendas: lista de fazendas liberadas
    //   • null  → vê TODAS as fazendas (admin)
    //   • ["SLP","IGARATA"] → vê só essas
    // - admin: true/false (admin pode editar tudo)
    //
    const USUARIOS = {
      admin: {
        senha: "admin123",
        fazendas: null,            // null = todas (usa a lista global "fazendas")
        admin: true
      },

      mauricio: {
        senha: "mau123",
        fazendas: ["SLP", "FUNIL"],// só essas fazendas aparecem pra ele
        admin: false
      },

      wilson: {
        senha: "wilson123",
        fazendas: ["IGARATA"],     // exemplo
        admin: false
      },

      // Adicione aqui outros gerentes:
      // "joao": { senha: "joao123", fazendas: ["PAINEIRAS","SANTA MARIA"], admin:false },
    };

    const $ = id => document.getElementById(id);

    $("btn-login").onclick = () => {
      const user = $("usuario").value.trim().toLowerCase();
      const pass = $("senha").value;
      const cred = USUARIOS[user];

      if (!cred || cred.senha !== pass) {
        $("error").style.display = "block";
        return;
      }

      // salva quem entrou
      localStorage.setItem("usuario_logado", user);
      localStorage.setItem("is_admin", cred.admin ? "true" : "false");

      // fazendas liberadas para esse usuário
      if (cred.fazendas && Array.isArray(cred.fazendas)) {
        localStorage.setItem("fazendas_liberadas", JSON.stringify(cred.fazendas));
      } else {
        // admin: pega TODAS as fazendas cadastradas (localStorage["fazendas"])
        const todas = JSON.parse(localStorage.getItem("fazendas") || "[]");
        localStorage.setItem("fazendas_liberadas", JSON.stringify(todas));
      }

      // limpa fazenda selecionada antes, para o painel escolher de novo
      localStorage.removeItem("fazenda_atual");

      // vai pro painel
      window.location.href = "painel.html";
    };
  </script>
</body>
</html>
